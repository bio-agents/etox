<?php

namespace EtoxMicrome\EntityBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * EntityRankingRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class EntityRankingRepository extends EntityRepository
{
     public function getEntityFromId($entityId)
    {
        $message="Inside getEntityFromId at EntityRankingRepository";
        $query = $this->_em->createQuery("
            SELECT a
            FROM EtoxMicromeEntityBundle:EntityRanking a
            WHERE a.id= :entityId
        ");
        $query->setParameter('entityId', $entityId);
        $entityRanking=$query->getResult();
        if(count($entityRanking)==0){
            $errorMessage="There is no entity with that name ('$entityName')";
            ldd($errorMessage);
        }
        if(count($entityRanking)!=1){
            $errorMessage="There are more than one entityName for '$entityName'";
            ldd($errorMessage);
        }
        //We return all the Compounds with the entityName given. By now we supose its only one entity!!!
        $entity=$entityRanking[0];
        return $entity;
    }

    public function getEntityFromName($entityName)
    {
        $message="Inside getEntityFromName at EntityRankingRepository";
        $query = $this->_em->createQuery("
            SELECT a
            FROM EtoxMicromeEntityBundle:EntityRanking a
            WHERE a.name= :entityName
        ");
        $query->setParameter('entityName', $entityName);
        $entityRanking=$query->getResult();
        if(count($entityRanking)==0){
            $errorMessage="There is no entity with that name ($entityName)";
            ldd($errorMessage);
        }
        if(count($entityRanking)!=1){
            $errorMessage="There are more than one entityName for '$entityName'";
            ldd($errorMessage);
        }
        //We return all the CompoundDict with the entityName given. By now we supose its only one entity!!!
        $entity=$entityRanking[0];
        return $entity;
    }
}
